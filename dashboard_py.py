# -*- coding: utf-8 -*-
"""dashboard.py

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1NvC6UDUVO4qM_x_JkHFvkks77qLRu34l
"""

import streamlit as st
import pandas as pd
import plotly.express as px

# T√≠tulo do Dashboard
st.set_page_config(page_title='Dashboard de Pre√ßos de Casas', layout='wide')
st.title('üè° Dashboard Interativo - An√°lise de Pre√ßos de Im√≥veis (Ames Housing)')

# Carregar dados
@st.cache_data
def carregar_dados():
    return pd.read_csv('train.csv')

df = carregar_dados()

# Filtro por Bairro
st.sidebar.header('Filtros')
bairros = df['Neighborhood'].unique()
bairro_escolhido = st.sidebar.selectbox('Selecione um Bairro:', sorted(bairros))

df_bairro = df[df['Neighborhood'] == bairro_escolhido]

# 1. Distribui√ß√£o de Pre√ßo de Venda no Bairro Selecionado
st.subheader(f'Distribui√ß√£o dos Pre√ßos em: {bairro_escolhido}')
fig1 = px.histogram(df_bairro, x='SalePrice', nbins=30, title='Distribui√ß√£o dos Pre√ßos de Venda')
st.plotly_chart(fig1, use_container_width=True)

# 2. Rela√ß√£o entre √Årea Constru√≠da e Pre√ßo
st.subheader('√Årea Constru√≠da x Pre√ßo de Venda')
fig2 = px.scatter(df, x='GrLivArea', y='SalePrice', color='OverallQual',
                  hover_data=['Neighborhood'],
                  title='Casas maiores tendem a valer mais (colorido por Qualidade)')
st.plotly_chart(fig2, use_container_width=True)

# 3. Boxplot por Qualidade Geral
st.subheader('Pre√ßo por Qualidade Geral da Casa')
fig3 = px.box(df, x='OverallQual', y='SalePrice', title='Rela√ß√£o entre Qualidade e Pre√ßo')
st.plotly_chart(fig3, use_container_width=True)

# 4. Pre√ßo M√©dio por Bairro (Top 10)
st.subheader('Top 10 Bairros com Maior Pre√ßo M√©dio')
top_bairros = df.groupby('Neighborhood')['SalePrice'].mean().sort_values(ascending=False).head(10)
fig4 = px.bar(x=top_bairros.values, y=top_bairros.index,
              orientation='h', title='Bairros Mais Valorizados')
st.plotly_chart(fig4, use_container_width=True)

# 5. Pre√ßo m√©dio por ano de constru√ß√£o
st.subheader('Pre√ßo M√©dio por Ano de Constru√ß√£o')
preco_ano = df.groupby('YearBuilt')['SalePrice'].mean()
fig5 = px.line(x=preco_ano.index, y=preco_ano.values,
               labels={'x': 'Ano de Constru√ß√£o', 'y': 'Pre√ßo M√©dio'},
               title='Tend√™ncia Hist√≥rica do Pre√ßo')
st.plotly_chart(fig5, use_container_width=True)